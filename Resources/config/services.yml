# Learn more about services, parameters and containers at
# http://symfony.com/doc/current/book/service_container.html
parameters:
    templating: value
services:
    _defaults:
        public: true

    app.twig_extension:
        class: EMS\CoreBundle\Twig\AppExtension
        arguments: ['@doctrine', '@security.authorization_checker', '@ems.service.user', '@ems.service.contenttype', '@app.elasticsearch', '@router', '@twig', '@ems.form.factories.objectChoiceListFactory', '@ems.service.environment', '@logger', '@form.factory' ]
        #public: false
        tags:
            - { name: twig.extension, priority: -2000 }
    app.listener.request:
        class: EMS\CoreBundle\EventListener\RequestListener
        arguments: ['@twig', '@doctrine', '@logger', '@router', '@service_container', '@security.authorization_checker', '@session', '%ems_core.allow_user_registration%', '%ems_core.user_login_route%', '%ems_core.user_registration_route%']
        tags:
            #- { name: kernel.event_listener, event: kernel.controller, method: provideTemplateTwigObjects, priority: -20 }
            #- { name: kernel.event_listener, event: kernel.terminate, method: startJob }
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }
            #- { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
            #kernel.response or kernel.terminate
    app.elasticsearch:
        class: Elasticsearch\ClientBuilder
        factory: [EMS\CoreBundle\Factories\ElasticsearchClientBuilderFactory, build]
        arguments: ["%ems_core.elasticsearch_cluster%"]
    app.twig.extension.stringloader:
        class: Twig_Extension_StringLoader
        tags:
             - { name: 'twig.extension' }
#### Begin list available ems ViewType ###
    ems.fieldtype.container:
        class: EMS\CoreBundle\Form\DataField\ContainerFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: container }
            - { name: form.type }
    ems.fieldtype.collection:
        class: EMS\CoreBundle\Form\DataField\CollectionFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch', '@service_container']
        tags:
            - { name: ems.form.datafieldtype, alias: collection }
            - { name: form.type }
    ems.fieldtype.colorpicker:
        class: EMS\CoreBundle\Form\DataField\ColorPickerFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: colorpicker }
            - { name: form.type }
    ems.fieldtype.nested:
        class: EMS\CoreBundle\Form\DataField\NestedFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: nested }
            - { name: form.type }
    ems.fieldtype.tabs:
        class: EMS\CoreBundle\Form\DataField\TabsFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: tabs }
            - { name: form.type }
    ems.fieldtype.ouuid:
        class: EMS\CoreBundle\Form\DataField\OuuidFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: ouuid }
            - { name: form.type }
    ems.fieldtype.computed:
        class: EMS\CoreBundle\Form\DataField\ComputedFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: computed }
            - { name: form.type }
    ems.fieldtype.json:
        class: EMS\CoreBundle\Form\DataField\JSONFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: json }
            - { name: form.type }
    ems.fieldtype.dataLink:
        class: EMS\CoreBundle\Form\DataField\DataLinkFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch', '@app.elasticsearch', '@event_dispatcher']
        tags:
            - { name: ems.form.datafieldtype, alias: datalink }
            - { name: form.type }
    ems.fieldtype.textstring:
        class: EMS\CoreBundle\Form\DataField\TextStringFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: textstring }
            - { name: form.type }
    ems.fieldtype.wysiwyg:
        class: EMS\CoreBundle\Form\DataField\WysiwygFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch', '@router']
        tags:
            - { name: ems.form.datafieldtype, alias: wysiwyg }
            - { name: form.type }
    ems.fieldtype.code:
        class: EMS\CoreBundle\Form\DataField\CodeFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: code }
            - { name: form.type }
    ems.fieldtype.textarea:
        class: EMS\CoreBundle\Form\DataField\TextareaFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: textarea }
            - { name: form.type }
    ems.fieldtype.select:
        class: EMS\CoreBundle\Form\DataField\SelectFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: select }
            - { name: form.type }
    ems.fieldtype.password:
        class: EMS\CoreBundle\Form\DataField\PasswordFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: password }
            - { name: form.type }
    ems.fieldtype.email:
        class: EMS\CoreBundle\Form\DataField\EmailFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: email }
            - { name: form.type }
    ems.fieldtype.icon:
        class: EMS\CoreBundle\Form\DataField\IconFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: icon }
            - { name: form.type }
    ems.fieldtype.asset:
        class: EMS\CoreBundle\Form\DataField\AssetFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch', '@ems.service.file']
        tags:
            - { name: ems.form.datafieldtype, alias: asset }
            - { name: form.type }
    ems.fieldtype.fileattachement:
        class: EMS\CoreBundle\Form\DataField\FileAttachmentFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch', '@ems.service.file', '@session']
        tags:
            - { name: ems.form.datafieldtype, alias: file_attachment }
            - { name: form.type }
    ems.fieldtype.indexed_asset:
        class: EMS\CoreBundle\Form\DataField\IndexedAssetFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch', '@ems.service.file', '@session']
        tags:
            - { name: ems.form.datafieldtype, alias: file_attachment }
            - { name: form.type }
    ems.fieldtype.urlattachement:
        class: EMS\CoreBundle\Form\DataField\UrlAttachmentFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch', '@ems.service.file']
        tags:
            - { name: ems.form.datafieldtype, alias: url_attachment }
            - { name: form.type }
    ems.fieldtype.radio:
        class: EMS\CoreBundle\Form\DataField\RadioFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: radio }
            - { name: form.type }
    ems.fieldtype.choice:
        class: EMS\CoreBundle\Form\DataField\ChoiceFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: choice }
            - { name: form.type }
    ems.fieldtype.checkbox:
        class: EMS\CoreBundle\Form\DataField\CheckboxFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: checkbox }
            - { name: form.type }
    ems.fieldtype.number:
        class: EMS\CoreBundle\Form\DataField\NumberFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: number }
            - { name: form.type }
    ems.fieldtype.integer:
        class: EMS\CoreBundle\Form\DataField\IntegerFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: integer }
            - { name: form.type }
    ems.fieldtype.date:
        class: EMS\CoreBundle\Form\DataField\DateFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: date }
            - { name: form.type }
    ems.fieldtype.daterange:
        class: EMS\CoreBundle\Form\DataField\DateRangeFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: daterange }
            - { name: form.type }
    ems.fieldtype.time:
        class: EMS\CoreBundle\Form\DataField\TimeFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: time }
            - { name: form.type }
    ems.fieldtype.collection_item:
        class: EMS\CoreBundle\Form\DataField\CollectionItemFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: form.type }
    ems.fieldtype.copyto:
        class: EMS\CoreBundle\Form\DataField\CopyToFieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: ems.form.datafieldtype, alias: copyto }
            - { name: form.type }
    ems.fieldtype.subfield:
        class: EMS\CoreBundle\Form\DataField\SubfieldType
        arguments: ['@security.authorization_checker', '@form.registry', '@ems.service.elasticsearch']
        tags:
            - { name: form.type }
#### End list available ems FieldType ###
#### Begin list of extended symfony types for ems field type needs###
    ems.exteneded.collectiontype:
        class: EMS\CoreBundle\Form\Form\EmsCollectionType
        arguments: ['@security.authorization_checker']
        tags:
            - { name: form.type }

#### Begin list available ems views type ###
    ems.view.keywords:
        class: EMS\CoreBundle\Form\View\KeywordsViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch']
        tags:
            - { name: ems.form.viewtype, alias: keywords }
            - { name: form.type }
    ems.view.criteria:
        class: EMS\CoreBundle\Form\View\CriteriaViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch', '@router']
        tags:
            - { name: ems.form.viewtype, alias: criteria }
            - { name: form.type }
    ems.view.export:
        class: EMS\CoreBundle\Form\View\ExportViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch']
        tags:
            - { name: ems.form.viewtype, alias: export }
            - { name: form.type }
    ems.view.sorter:
        class: EMS\CoreBundle\Form\View\SorterViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch', '@session', '@ems.service.data', '@router']
        tags:
            - { name: ems.form.viewtype, alias: sorter }
            - { name: form.type }
    ems.view.hierarchical:
        class: EMS\CoreBundle\Form\View\HierarchicalViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch', '@session', '@ems.service.data', '@router']
        tags:
            - { name: ems.form.viewtype, alias: hierarchical }
            - { name: form.type }
    ems.view.report:
        class: EMS\CoreBundle\Form\View\ReportViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch']
        tags:
            - { name: ems.form.viewtype, alias: report }
            - { name: form.type }
    ems.view.calendar:
        class: EMS\CoreBundle\Form\View\CalendarViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch']
        tags:
            - { name: ems.form.viewtype, alias: calendar }
            - { name: form.type }
    ems.view.gallery:
        class: EMS\CoreBundle\Form\View\GalleryViewType
        arguments: ['@form.factory', '@twig', '@app.elasticsearch', '@ems.service.search']
        tags:
            - { name: ems.form.viewtype, alias: gallery }
            - { name: form.type }
#### End list available ems views ###
    ems.form.factories.objectChoiceListFactory:
        class: EMS\CoreBundle\Form\Factory\ObjectChoiceListFactory
        arguments: ['@ems.service.contenttype', '@ems.service.objectchoicecache']
    ems.form.factories.contentTypeFieldChoiceListFactory:
        class: EMS\CoreBundle\Form\Factory\ContentTypeFieldChoiceListFactory
        arguments: ['@ems.service.contenttype']
    ems.form.field.objectpickertype:
        class: EMS\CoreBundle\Form\Field\ObjectPickerType
        arguments: ['@ems.form.factories.objectChoiceListFactory', '@ems.service.contenttype']
        tags:
            - { name: form.type }
    ems.form.field.contenttypefieldpickertype:
        class: EMS\CoreBundle\Form\Field\ContentTypeFieldPickerType
        arguments: ['@ems.form.factories.contentTypeFieldChoiceListFactory']
        tags:
            - { name: form.type }
    ems.form.field.viewtypepickertype:
        class: EMS\CoreBundle\Form\Field\ViewTypePickerType
        tags:
            - { name: form.type }
    ems.form.field.datafieldtypepickertype:
        class: EMS\CoreBundle\Form\Field\FieldTypePickerType
        tags:
            - { name: form.type }
            
    ems.form.field.wysiwygstylessetpickertype:
        class: EMS\CoreBundle\Form\Field\WysiwygStylesSetPickerType
        arguments: ['@ems.service.wysiwyg_styles_set']
        tags:
            - { name: form.type }
    ems.form.field.rolepickertype:
        class: EMS\CoreBundle\Form\Field\RolePickerType
        arguments: ['@ems.service.user']
        tags:
            - { name: form.type }
    ems.form.field.environmentpickertype:
        class: EMS\CoreBundle\Form\Field\EnvironmentPickerType
        arguments: ['@ems.service.environment']
        tags:
            - { name: form.type }
    ems.form.field.contenttypepickertype:
        class: EMS\CoreBundle\Form\Field\ContentTypePickerType
        arguments: ['@ems.service.contenttype']
        tags:
            - { name: form.type }
    ems.form.fieldtype.fieldtypetype:
        class: EMS\CoreBundle\Form\FieldType\FieldTypeType
        arguments: ['@ems.form.field.datafieldtypepickertype', '@form.registry', '@logger']
        tags:
            - { name: form.type }
    ems.form.form.templatetype:
        class: EMS\CoreBundle\Form\Form\TemplateType
        arguments: ['%ems_core.circles_object%', '@ems.service.environment']
        tags:
            - { name: form.type }
    ems.form.form.notificationtype:
        class: EMS\CoreBundle\Form\Form\NotificationFormType
        arguments: ['%ems_core.circles_object%', '@ems.service.environment']
        tags:
            - { name: form.type }
    ems.form.form.revisiontype:
        class: EMS\CoreBundle\Form\Form\RevisionType
        arguments: ['@form.registry']
        tags:
            - { name: form.type }
    ems.form.field.analyzeroptionstype:
        class: EMS\CoreBundle\Form\Field\AnalyzerOptionsType
        arguments: ['@doctrine']
        tags:
            - { name: form.type }
    ems.form.field.analyzerpickertype:
        class: EMS\CoreBundle\Form\Field\AnalyzerPickerType
        arguments: ['@doctrine']
        tags:
            - { name: form.type }
    ems.form.field.alignindexes:
        class: EMS\CoreBundle\Form\Field\AlignIndexesType
        arguments: ['@ems.service.alias']
        tags:
            - { name: form.type }
    ems.form.managed_alias:
        class: EMS\CoreBundle\Form\Form\ManagedAliasType
        arguments: ['@ems.service.alias']
        tags:
            - { name: form.type }
            
            
### regular services
    ems.service.mapping:
        class: EMS\CoreBundle\Service\Mapping
        arguments: ['@ems.form.fieldtype.fieldtypetype', '@ems.service.elasticsearch', '%ems_core.version%', '%ems_core.instance_id%']
    EMS\CoreBundle\Service\DataService:
        class: EMS\CoreBundle\Service\DataService
        arguments: ['@doctrine', '@security.authorization_checker', '@security.token_storage', '%ems_core.lock_time%', '@app.elasticsearch', '@ems.service.mapping', '%ems_core.instance_id%', '@session', '@form.factory', '@service_container', '@form.registry', '@event_dispatcher', '@ems.service.contenttype', '%ems_private_key%']
        tags:
            - { name: kernel.event_listener, event: ems_core.revision.update_referers, method: updateReferers, priority: 0 }
    ems.service.alias:
        class: EMS\CoreBundle\Service\AliasService
        arguments: ['@app.elasticsearch', '@doctrine']
    ems.service.bulker:
        class: EMS\CoreBundle\Service\BulkerService
        arguments: ['@app.elasticsearch', '@logger']
    ems.service.environment:
        class: EMS\CoreBundle\Service\EnvironmentService
        arguments: ['@doctrine', '@session', '@ems.service.user', '@security.authorization_checker', '%ems_core.single_type_index%']
    ems.service.contenttype:
        class: EMS\CoreBundle\Service\ContentTypeService
        arguments: ['@doctrine', '@session', '@ems.service.mapping', '@app.elasticsearch', '@ems.service.environment', '@form.registry', '@translator', '%ems_core.instance_id%', '%ems_core.single_type_index%']
    ems.service.user:
        class: EMS\CoreBundle\Service\UserService
        arguments: ['@doctrine', '@session', '@security.token_storage', '%security.role_hierarchy.roles%']
    ems.service.wysiwyg_profile:
        class: EMS\CoreBundle\Service\WysiwygProfileService
        arguments: ['@doctrine', '@session', '@translator']
    ems.service.aggregate_option:
        class: EMS\CoreBundle\Service\AggregateOptionService
        arguments: ['@doctrine', '@session', '@translator']
    ems.service.sort_option:
        class: EMS\CoreBundle\Service\SortOptionService
        arguments: ['@doctrine', '@session', '@translator']
    ems.service.wysiwyg_styles_set:
        class: EMS\CoreBundle\Service\WysiwygStylesSetService
        arguments: ['@doctrine', '@session', '@translator']
    ems.service.objectchoicecache:
        class: EMS\CoreBundle\Service\ObjectChoiceCacheService
        arguments: ['@app.elasticsearch', '@session', '@ems.service.contenttype']
    ems.service.audit:
        class: EMS\CoreBundle\Service\AuditService
        arguments: ['%ems_core.audit_index%', '@doctrine', '@app.elasticsearch', '@ems.service.user', '@logger']
    ems.service.publish:
        class: EMS\CoreBundle\Service\PublishService
        arguments: ['@doctrine', '@security.authorization_checker', '@security.token_storage', '%ems_core.lock_time%', '@app.elasticsearch', '@ems.service.mapping', '%ems_core.instance_id%', '@session', '@ems.service.contenttype', '@ems.service.environment', '@ems.service.data', '@ems.service.audit', '@ems.service.user', '@event_dispatcher']
    ems.service.notification:
        class: EMS\CoreBundle\Service\NotificationService
        arguments: ['%ems_core.audit_index%', '@doctrine', '@ems.service.user', '@logger', '@ems.service.audit', '@session', '@service_container', '@ems.service.data', '%ems_core.from_email%', '@twig']
        tags:
            - { name: kernel.event_listener, event: revision.new_draft, method: newDraftEvent, priority: 0 }
            - { name: kernel.event_listener, event: revision.finalize_draft, method: finalizeDraftEvent, priority: 0 }
            - { name: kernel.event_listener, event: revision.publish, method: publishEvent, priority: 0 }
            - { name: kernel.event_listener, event: revision.unpublish, method: unpublishEvent, priority: 0 }
    ems.service.i18n:
        class: EMS\CoreBundle\Service\I18nService
        arguments: ['@doctrine']
    ems.service.rest_client:
        class: EMS\CoreBundle\Service\RestClientService
    ems.service.asset_extractor:
        class: EMS\CoreBundle\Service\AssetExtratorService
        arguments: ["@ems.service.rest_client", '@session', '%ems_core.tika_server%']
    ems.service.asset:
        class: EMS\CoreBundle\Service\AssetService
        arguments: ['@app.elasticsearch', '@ems.service.file', '@request_stack', '@kernel']
    ems.service.search:
        class: EMS\CoreBundle\Service\SearchService
        arguments: []
    ems.service.file:
        class: EMS\CoreBundle\Service\FileService
        arguments: ['@doctrine', '%ems_core.upload_folder%']
    ems.service.helper:
        class: EMS\CoreBundle\Service\HelperService
        arguments: ['@doctrine', '@request_stack', '%ems_core.paging_size%']
    ems.service.elasticsearch:
        class: EMS\CoreBundle\Service\ElasticsearchService
        arguments: ['%ems_core.elasticsearch_version%']
    ems.service.job:
        class: EMS\CoreBundle\Service\JobService
        arguments: ['@doctrine', '@kernel', '@logger']

        
### command services ###
    ems.environment.ems:
        class: EMS\CoreBundle\Command\EmsCommand
        arguments: ['@logger', '@app.elasticsearch', '@session']
        tags:
            -  { name: console.command }
    ems.contenttype.migrate:
        class: EMS\CoreBundle\Command\MigrateCommand
        arguments: ['@doctrine', '@logger', '@app.elasticsearch', '@ems.service.bulker', '@ems.service.mapping', '@ems.service.data', '@form.factory', '%ems_core.instance_id%', '@session']
        tags:
            -  { name: console.command }
    ems.environment.rebuild:
        class: EMS\CoreBundle\Command\RebuildCommand
        arguments: ['@doctrine', '@logger', '@app.elasticsearch', '@ems.service.mapping', '@service_container', '@session', '%ems_core.instance_id%', '%ems_core.single_type_index%']
        tags:
            -  { name: console.command }
    ems.environment.recompute:
        class: EMS\CoreBundle\Command\RecomputeCommand
        arguments: ['@ems.service.data', '@doctrine', '@form.factory', '@ems.service.publish', '@logger', '@app.elasticsearch', '@session', '@ems.service.contenttype']
        tags:
            -  { name: console.command }
    ems.environment.updatemetafield:
        class: EMS\CoreBundle\Command\UpdateMetaFieldCommand
        arguments: ['@doctrine', '@logger', '@app.elasticsearch', '@session', '@ems.service.data']
        tags:
            -  { name: console.command }
    ems.environment.align:
        class: EMS\CoreBundle\Command\AlignCommand
        arguments: ['@doctrine', '@logger', '@app.elasticsearch', '@ems.service.data', '@ems.service.contenttype', '@ems.service.environment', '@ems.service.publish', '@session']
        tags:
            -  { name: console.command }
    ems.environment.reindex:
        class: EMS\CoreBundle\Command\ReindexCommand
        arguments: ['@doctrine', '@logger', '@app.elasticsearch', '@ems.service.mapping', '@service_container', '%ems_core.instance_id%', '@session', '@ems.service.data']
        tags:
            -  { name: console.command }
    ems.contenttype.delete:
        class: EMS\CoreBundle\Command\DeleteCommand
        arguments: ['@doctrine', '@logger', '@app.elasticsearch', '@ems.service.mapping', '@service_container']
        tags:
            -  { name: console.command }
    ems.contenttype.lock:
        class: EMS\CoreBundle\Command\LockCommand
        arguments: ['@doctrine']
        tags:
            -  { name: console.command }

    ems.contenttype.clean:
        class: EMS\CoreBundle\Command\CleanDeletedContentTypeCommand
        arguments: ['@doctrine', '@logger', '@app.elasticsearch', '@ems.service.mapping', '@service_container']
        tags:
            -  { name: console.command }
    ems.notification.send:
        class: EMS\CoreBundle\Command\SendNotificationsCommand
        arguments: ['@doctrine', '@logger', '@ems.service.user', '@ems.service.notification', '%ems_core.notification_pending_timeout%']
        tags:
            -  { name: console.command }
    ems.revisions.index-file-fields:
        class: EMS\CoreBundle\Command\IndexFile
        arguments: ['@logger', '@app.elasticsearch', '@session', '@doctrine', '@ems.service.contenttype', '%database_name%', '%database_driver%', '@ems.service.asset_extractor', '@ems.service.file']
        tags:
            -  { name: console.command }
    ems.environment.reconnect:
        class: EMS\CoreBundle\Command\ReconnectCommand
        arguments: ['@app.elasticsearch', '@ems.service.contenttype', '@ems.service.environment']
        tags:
            -  { name: console.command }
    ems.environment.list:
        class: EMS\CoreBundle\Command\EnvironmentCommand
        arguments: ['@logger', '@ems.service.environment']
        tags:
            -  { name: console.command }
#### security services
    api_key_user_provider:
        class: EMS\CoreBundle\Security\ApiKeyUserProvider
        arguments: ['@ems.service.user']
    apikey_authenticator:
        class:  EMS\CoreBundle\Security\ApiKeyAuthenticator
        public: false



#### Will be mark as deprecated soon
    ems.service.data:
        alias: 'EMS\CoreBundle\Service\DataService'
        public: true


#activate autowiring on core bundle controller
    EMS\CoreBundle\Controller\:
        autowire: true
        autoconfigure: true
        public: true
        resource: '../../Controller/*'