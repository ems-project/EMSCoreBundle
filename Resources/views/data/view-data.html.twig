{% extends 'EMSCoreBundle::base.html.twig' %}{% trans_default_domain 'EMSCoreBundle' %}

{% block title %}Recursive view of the {{ object._type }} : {{ object._id }}{% endblock %}
{% block pagetitle %}
	<i class="{% if contentType and contentType.icon %}{{ contentType.icon }} {% else %} fa fa-question {% endif %} "></i>
	{{ object._type|humanize }} : 
	
	{% if contentType and (contentType.labelField) and (attribute(attribute(object, '_source'), contentType.labelField)  is defined ) %}
		{{ attribute(attribute(object, '_source'), contentType.labelField) }}<small>{{ object._id }}</small>
	{% else %}
		{{ object._id }}
	{% endif %}
					
	
        {% if environment is defined %}
            as indexed in <span class="badge bg-{{ environment.color|raw }}">{{ environment.name|humanize }}</span>
        {% elseif environments is defined %}
            in environments 
            {% for environment in environments %}
                <span class="badge bg-{{ environment.color|raw }}">{{ environment.name|humanize }}</span>
            {% endfor %}
        {% endif %}
{% endblock %} 

{% block subtitle %}{% endblock %} 

{% block body %}
{% import "EMSCoreBundle:macros:data-field-type.html.twig" as macros %}
<div class="row raw-view">
	<div class="col-xs-12">
		<div class="box">
			<div class="box-header">
				<h3 class="box-title">{{ 'Recursive view'|trans }}</h3>
			</div>
			<div class="box-body">
				{% import "EMSCoreBundle:macros:view.html.twig" as macros %}
				{{ macros.recursifArray(object) }}
			</div>
                        {% if environment is defined %}
                            <div class="box-footer">
                                {% include 'EMSCoreBundle:elements:object-toolbar.html.twig' with {
                                    'object':  object,
                                    'contentType': contentType,
                                    'recursiveView': true
                                }%}
                            </div>
                        {% endif %}
		</div>
	</div>
</div>
{% endblock %}

{% block javascripts %}
	{% if contentType %}
		{% include 'EMSCoreBundle:app:menu.html.twig' with {
			'item':  'data-index-' ~ contentType.id
		}%}
	{% endif %}
{% endblock %}	