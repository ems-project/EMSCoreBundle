/**
 * @license Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md or http://ckeditor.com/license
 */
CKEDITOR.plugins.add("div",{requires:"dialog",lang:"af,ar,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"creatediv",hidpi:!0,init:function(e){if(!e.blockless){var d=e.lang.div,i="div(*)";CKEDITOR.dialog.isTabEnabled(e,"editdiv","advanced")&&(i+=";div[dir,id,lang,title]{*}"),e.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:i,requiredContent:"div",contextSensitive:!0,refresh:function(e,d){var i=e.config.div_wrapTable?d.root:d.blockLimit;this.setState("div"in i.getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})),e.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"})),e.addCommand("removediv",{requiredContent:"div",exec:function(e){var d,i,t=e.getSelection(),a=t&&t.getRanges(),n=t.createBookmarks(),o=[];function r(d){var i=CKEDITOR.plugins.div.getSurroundDiv(e,d);i&&!i.data("cke-div-added")&&(o.push(i),i.data("cke-div-added"))}for(var l=0;l<a.length;l++)(d=a[l]).collapsed?r(t.getStartElement()):((i=new CKEDITOR.dom.walker(d)).evaluator=r,i.lastForward());for(l=0;l<o.length;l++)o[l].remove(!0);t.selectBookmarks(n)}}),e.ui.addButton&&e.ui.addButton("CreateDiv",{label:d.toolbar,command:"creatediv",toolbar:"blocks,50"}),e.addMenuItems&&(e.addMenuItems({editdiv:{label:d.edit,command:"editdiv",group:"div",order:1},removediv:{label:d.remove,command:"removediv",group:"div",order:5}}),e.contextMenu&&e.contextMenu.addListener((function(d){return!d||d.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(e)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}))),CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js"),CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}}),CKEDITOR.plugins.div={getSurroundDiv:function(e,d){var i=e.elementPath(d);return e.elementPath(i.blockLimit).contains((function(e){return e.is("div")&&!e.isReadOnly()}),1)}};