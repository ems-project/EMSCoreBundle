!function(){var t,o,e;CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"bgcolor,textcolor",hidpi:!0,init:function(o){function n(n){function a(t,e,n){var i={};if(t&&(i.color=t),e&&(i.colorName=e),e=!CKEDITOR.tools.isEmpty(i)&&new CKEDITOR.style(function(){var t=o.config["colorButton_"+u+"Style"];return t.childRule="back"==u?function(t){return r(t)}:function(t){return!(t.is("a")||t.getElementsByTag("a").count())||r(t)},t}(),i),o.execCommand(f,{newStyle:e}),t&&n)for(n.addColor(t.substr(1).toUpperCase()),t=g.element.find("[role=option]").toArray(),n=0;n<t.length;n++)t[n].setAttributes({"aria-posinset":n+1,"aria-setsize":t.length})}var c=n.name,u=n.type,h=n.title,d=n.order,f=n.commandName;n=n.contentTransformations||{};var g,C=new CKEDITOR.style(s["colorButton_"+u+"Style"]),m=CKEDITOR.tools.getNextId()+"_colorBox",p={type:u},b=new CKEDITOR.style(s["colorButton_"+u+"Style"],{color:"inherit"}),E=CKEDITOR.tools.addFunction((function(t,e,n){o.focus(),o.fire("saveSnapshot"),"?"==t?o.getColorFromDialog((function(t){t&&a(t,e,y)}),null,p):a(t&&"#"+t,e,y),n&&(n.setAttribute("cke_colorlast",!0),o.once("selectionChange",(function(){n.removeAttribute("cke_colorlast")})))})),y=e.getRowLimit(o)?new e(o,"back"==u?"background-color":"color",E):void 0;o.addCommand(f,{contextSensitive:!0,exec:function(t,o){if(!t.readOnly){var e=o.newStyle;t.removeStyle(b),t.focus(),e&&t.applyStyle(e),t.fire("saveSnapshot")}},refresh:function(t,o){b.checkApplicable(o,t,t.activeFilter)?b.checkActive(o,t)?this.setState(CKEDITOR.TRISTATE_ON):this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}}),o.ui.add(c,CKEDITOR.UI_PANELBUTTON,{label:h,title:h,command:f,editorFocus:0,toolbar:"colors,"+d,allowedContent:C,requiredContent:C,contentTransformations:n,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":l.panelTitle}},select:function(o){var e=s.colorButton_colors.split(",");o=CKEDITOR.tools.array.find(e,o),o=t.normalizeColor(o),i(g,o),g._.markFirstDisplayed()},onBlock:function(n,r){g=r,r.autoSize=!0,r.element.addClass("cke_colorblock"),r.element.setHtml(function(n,r,i){var a=[],c=s.colorButton_colors.split(","),u=o.plugins.colordialog&&s.colorButton_enableMore;i=c.length+i+(u?1:0);var h=1;for(s.colorButton_enableAutomatic&&(i+=1,h+=1,a.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true',' title="',l.auto,'"',' draggable="false"',' ondragstart="return false;"',' onclick="CKEDITOR.tools.callFunction(',r,',null);return false;"'," href=\"javascript:void('",l.auto,"')\"",' role="option" aria-posinset="1" aria-setsize="',i,'">','<table role="presentation" cellspacing=0 cellpadding=0 width="100%">',"<tr>",'<td colspan="',o.config.colorButton_colorsPerRow,'" align="center">','<span class="cke_colorbox" id="',n,'"></span>',l.auto,"</td>","</tr>","</table>","</a>")),a.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tbody>'),n=0;n<c.length;n++){0==n%o.config.colorButton_colorsPerRow&&a.push("</tr><tr>");var d,f=(d=c[n].split("/"))[0];(d=new t(o,{color:d[1]||f,label:d[1]?f:void 0},r)).setPositionIndex(h+n,i),a.push(d.getHtml())}return e.getRowLimit(o)&&e.renderContainer(a,o),u&&a.push("</tr>","<tr>",'<td colspan="',o.config.colorButton_colorsPerRow,'" align="center">','<a class="cke_colormore" _cke_focus=1 hidefocus=true',' title="',l.more,'"',' draggable="false"',' ondragstart="return false;"',' onclick="CKEDITOR.tools.callFunction(',r,",'?');return false;\""," href=\"javascript:void('",l.more,"')\"",' role="option" aria-posinset="',i,'" aria-setsize="',i,'">',l.more,"</a>","</td>"),a.push("</tr></tbody></table>"),a.join("")}(m,E,y?y.getLength():0)),r.element.getDocument().getBody().setStyle("overflow","hidden"),r.element.getAscendant({html:1}).setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var i=r.keys,a="rtl"==o.lang.dir;i[a?37:39]="next",i[40]="next",i[9]="next",i[a?39:37]="prev",i[38]="prev",i[CKEDITOR.SHIFT+9]="prev",i[32]="click",y&&y.setContainer(r.element.findOne(".cke_colorhistory"))},onOpen:function(){var e=(l=o.getSelection())&&l.getStartElement(),n=o.elementPath(e),r="back"==u?"background-color":"color";if(n){e=n.block||n.blockLimit||o.document.getBody();do{n=e&&e.getComputedStyle(r)||"transparent"}while("back"==u&&"transparent"==n&&e&&(e=e.getParent()));if(n&&"transparent"!=n||(n="#ffffff"),s.colorButton_enableAutomatic&&g.element.findOne("#"+m).setStyle("background-color",n),e=l&&l.getRanges()[0]){var l=new CKEDITOR.dom.walker(e),a=e.collapsed?e.startContainer:l.next();for(e="";a;){if(a.type!==CKEDITOR.NODE_ELEMENT&&(a=a.getParent()),a=t.normalizeColor(a.getComputedStyle(r)),(e=e||a)!==a){e="";break}a=l.next()}"transparent"==e&&(e=""),"fore"==u&&(p.automaticTextColor="#"+t.normalizeColor(n)),p.selectionColor=e?"#"+e:"",i(g,e)}return n}}})}function r(t){return"false"==t.getAttribute("contentEditable")||t.getAttribute("data-nostyle")}function i(o,e){var n=o._.getItems(),r=o.element.findOne("[aria-selected]"),i=o.element.findOne("[cke_colorlast]");if(r&&r.removeAttribute("aria-selected"),i)i.setAttribute("aria-selected",!0);else for(r=0;r<n.count();r++)if(i=n.getItem(r),e&&e==t.normalizeColor(i.getAttribute("data-value"))){i.setAttribute("aria-selected",!0);break}}var s=o.config,l=o.lang.colorbutton;if(!CKEDITOR.env.hc){n({name:"TextColor",type:"fore",commandName:"textColor",title:l.textColorTitle,order:10,contentTransformations:[[{element:"font",check:"span{color}",left:function(t){return!!t.attributes.color},right:function(t){t.name="span",t.attributes.color&&(t.styles.color=t.attributes.color),delete t.attributes.color}}]]});var a,c=o.config.colorButton_normalizeBackground;(void 0===c||c)&&(a=[[{element:"span",left:function(t){var o=CKEDITOR.tools;return!("span"!=t.name||!t.styles||!t.styles.background)&&((t=o.style.parse.background(t.styles.background)).color&&1===o.object.keys(t).length)},right:function(t){var e=new CKEDITOR.style(o.config.colorButton_backStyle,{color:t.styles.background}).getDefinition();return t.name=e.element,t.styles=e.styles,t.attributes=e.attributes||{},t}}]]),n({name:"BGColor",type:"back",commandName:"bgColor",title:l.bgColorTitle,order:20,contentTransformations:a})}}}),t=CKEDITOR.tools.createClass({$:function(o,e,n){this.$=new CKEDITOR.dom.element("td"),this.color=CKEDITOR.tools._isValidColorFormat(e.color)?e.color:"",this.clickFn=n,this.label=e.label||t.colorNames(o)[this.color]||this.color,this.setHtml()},statics:{colorNames:function(t){return t.lang.colorbutton.colors},normalizeColor:function(t){var o=/^(rgb|hsl)a\(/g.test(t),e=/^rgba\((\s*0\s*,?){4}\)$/g.test(t);return o&&!e?(t=new CKEDITOR.tools.color(t),CKEDITOR.tools.normalizeHex(t.getHex()||"").replace(/#/g,"")):CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(t||"")).replace(/#/g,"")}},proto:{getElement:function(){return this.$},getHtml:function(){return this.getElement().getOuterHtml()},setHtml:function(){this.getElement().setHtml('<a class="cke_colorbox" _cke_focus=1 hidefocus=true title="'+this.label+'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction('+this.clickFn+",'"+this.color+"','"+this.label+"', this); return false;\" href=\"javascript:void('"+this.color+'\')" data-value="'+this.color+'" role="option"><span class="cke_colorbox" style="background-color:#'+this.color+'"></span></a>')},setPositionIndex:function(t,o){this.getElement().getChild(0).setAttributes({"aria-posinset":t,"aria-setsize":o})}}}),o=CKEDITOR.tools.createClass({$:function(){this.$=new CKEDITOR.dom.element("tr"),this.$.addClass("cke_colorhistory_row"),this.boxes=[]},proto:{getElement:function(){return this.$},removeLastColor:function(){return this.getElement().getLast().remove(),this.boxes.pop()},addNewColor:function(t){this.boxes.unshift(t),this.getElement().append(t.getElement(),!0)},extractColorBox:function(t){var o=CKEDITOR.tools.getIndex(this.boxes,(function(o){return o.color===t}));return 0>o?null:(this.boxes[o].getElement().remove(),this.boxes.splice(o,1)[0])}}}),e=CKEDITOR.tools.createClass({$:function(t,o,e){this.editor=t,this.cssProperty=o,this.clickFn=e,this.rows=[],this._.addNewRow(),this.editor.config.colorButton_renderContentColors&&this.editor.once("instanceReady",(function(){this.renderContentColors()}),this)},statics:{renderContainer:function(t,o){t.push('</tbody><tbody class="cke_colorhistory" style="display:none;">',"<tr>",'<td colspan="',o.config.colorButton_colorsPerRow,'" align="center">',"<span><hr></span>","</td>","</tr>","</tbody><tbody>")},getRowLimit:function(t){return t.config.colorButton_historyRowLimit},getCapacity:function(t){return e.getRowLimit(t)*t.config.colorButton_colorsPerRow},colorList:CKEDITOR.tools.style.parse._colors},_:{countColors:function(){var t=CKEDITOR.tools.getStyledSpans(this.cssProperty,this.editor.editable());return CKEDITOR.tools.array.reduce(t,(function(t,o){var n=this._.getHexCode(o,this.cssProperty,e.colorList);return t[n]=t[n]||0,t[n]+=1,t}),{},this)},getHexCode:function(o,e,n){var r=o.getStyle(e);return r in n?n[r].substr(1):t.normalizeColor(o.getComputedStyle(e)).toUpperCase()},sortByOccurrencesAscending:function(t,o){var e,n=[];for(e in t){var r={};r[o]=e,r.frequency=t[e],n.push(r)}return n.sort((function(t,o){return o.frequency-t.frequency})),this._.trimToCapacity(n),n.reverse()},trimToCapacity:function(t){t.splice(e.getCapacity(this.editor))},addColors:function(t){CKEDITOR.tools.array.forEach(t,(function(t){this.addColor(t.colorCode)}),this)},extractColorBox:function(t){for(var o=0;o<this.rows.length;o++){var e=this.rows[o].extractColorBox(t);if(e)return e}return null},moveToBeginning:function(t){this.rows[0].addNewColor(t)},createAtBeginning:function(o){this._.moveToBeginning(new t(this.editor,{color:o},this.clickFn))},addNewRow:function(){this.rows.push(new o),this.container&&this.container.append(this.rows[this.rows.length-1].getElement())},alignRows:function(){for(var t=0;t<e.getRowLimit(this.editor)&&!(this.rows[t].boxes.length<=this.editor.config.colorButton_colorsPerRow);t++)this.rows[t+1]?this._.moveLastBoxToNextRow(t):t<e.getRowLimit(this.editor)-1?(this._.addNewRow(),this._.moveLastBoxToNextRow(t)):this.rows[t].removeLastColor()},moveLastBoxToNextRow:function(t){this.rows[t+1].addNewColor(this.rows[t].removeLastColor())},refreshPositions:function(){var t=this._.countPanelElements(),o=this._.calculateFirstPosition(t);CKEDITOR.tools.array.forEach(this.rows,(function(e){CKEDITOR.tools.array.forEach(e.boxes,(function(e){e.setPositionIndex(o,t),o+=1}))}))},countPanelElements:function(){var t=this.editor.config.colorButton_colors.split(",").length+this.getLength();return this.editor.plugins.colordialog&&this.editor.config.colorButton_enableMore&&(t+=1),this.editor.config.colorButton_enableAutomatic&&(t+=1),t},calculateFirstPosition:function(t){return this.editor.plugins.colordialog&&this.editor.config.colorButton_enableMore?t-this.getLength():t-this.getLength()+1},attachRows:function(){CKEDITOR.tools.array.forEach(this.rows,(function(t){this.container.append(t.getElement())}),this)}},proto:{setContainer:function(t){this.container=t,this._.attachRows(),this.getLength()&&this.show()},show:function(){this.container&&this.container.show()},renderContentColors:function(){var t=this._.countColors();CKEDITOR.tools.isEmpty(t)||(t=this._.sortByOccurrencesAscending(t,"colorCode"),this._.addColors(t),this._.refreshPositions())},addColor:function(t){var o=this._.extractColorBox(t);this.container&&!this.container.isVisible()&&this.show(),o?this._.moveToBeginning(o):this._.createAtBeginning(t),this._.alignRows()},getLength:function(){return CKEDITOR.tools.array.reduce(this.rows,(function(t,o){return t+o.boxes.length}),0)}}})}(),CKEDITOR.config.colorButton_enableMore=!0,CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.config.colorButton_enableAutomatic=!0,CKEDITOR.config.colorButton_colorsPerRow=6,CKEDITOR.config.colorButton_historyRowLimit=1,CKEDITOR.config.colorButton_renderContentColors=!0;