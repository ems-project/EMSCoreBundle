!function(){function e(e){return CKEDITOR.env.ie?e.$.clientWidth:parseInt(e.getComputedStyle("width"),10)}function t(e,t){var o=e.getComputedStyle("border-"+t+"-width"),n={thin:"0px",medium:"1px",thick:"2px"};return 0>o.indexOf("px")&&(o=o in n&&"none"!=e.getComputedStyle("border-style")?n[o]:0),parseFloat(o)}function o(e){(e.data||e).preventDefault()}function n(n){function a(){for(var o=d.rtl,a=o?y.length:v.length,r=0,l=0;l<a;l++){var s=v[l],u=y[l],m=d.table;CKEDITOR.tools.setTimeout((function(e,t,l,s,u,d){e&&e.setStyle("width",i(Math.max(t+d,1))),l&&l.setStyle("width",i(Math.max(s-d,1))),u&&m.setStyle("width",i(u+d*(o?-1:1))),++r==a&&n.fire("saveSnapshot")}),0,this,[s,s&&e(s),u,u&&e(u),(!s||!u)&&e(m)+t(m,"left")+t(m,"right"),g])}}function l(t){o(t),n.fire("saveSnapshot"),t=d.index;for(var a=CKEDITOR.tools.buildTableMap(d.table),i=[],r=[],l=Number.MAX_VALUE,p=l,C=d.rtl,T=0,E=a.length;T<E;T++){var O=(x=a[T])[t+(C?1:0)],x=x[t+(C?0:1)];O=O&&new CKEDITOR.dom.element(O),x=x&&new CKEDITOR.dom.element(x);O&&x&&O.equals(x)||(O&&(l=Math.min(l,e(O))),x&&(p=Math.min(p,e(x))),i.push(O),r.push(x))}v=i,y=r,D=d.x-l,b=d.x+p,h.setOpacity(.5),c=parseInt(h.getStyle("left"),10),g=0,f=1,h.on("mousemove",u),m.on("dragstart",o),m.on("mouseup",s,this)}function s(e){e.removeListener(),function(){f=0,h.setOpacity(0),g&&a();var e=d.table;setTimeout((function(){e.removeCustomData("_cke_table_pillars")}),0),m.removeListener("dragstart",o)}()}function u(e){p(e.data.getPageOffset().x)}var d,m,h,f,c,g,p,v,y,D,b;m=n.document,h=CKEDITOR.dom.element.createFromHtml('<div data-cke-temp=1 contenteditable=false unselectable=on style="position:absolute;cursor:col-resize;filter:alpha(opacity=0);opacity:0;padding:0;background-color:#004;background-image:none;border:0px none;z-index:10000"></div>',m),n.on("destroy",(function(){h.remove()})),r||m.getDocumentElement().append(h),this.attachTo=function(e){var t,o,n;f||(r&&(m.getBody().append(h),g=0),t=(d=e).alignedPillars[0],o=d.alignedPillars[d.alignedPillars.length-1],n=t.y,t=o.height+o.y-t.y,h.setStyles({width:i(e.width),height:i(t),left:i(e.x),top:i(n)}),r&&h.setOpacity(.25),h.on("mousedown",l,this),m.getBody().setStyle("cursor","col-resize"),h.show())},p=this.move=function(e,t){if(!d)return 0;if(!(f||e>=d.x&&e<=d.x+d.width&&t>=d.y&&t<=d.y+d.height))return d=null,f=g=0,m.removeListener("mouseup",s),h.removeListener("mousedown",l),h.removeListener("mousemove",u),m.getBody().setStyle("cursor","auto"),r?h.remove():h.hide(),0;var o=e-Math.round(h.$.offsetWidth/2);if(f){if(o==D||o==b)return 1;o=Math.max(o,D),o=Math.min(o,b),g=o-c}return h.setStyle("left",i(o)),1}}function a(e){var t=e.data.getTarget();if("mouseout"==e.name){if(!t.is("table"))return;for(var o=new CKEDITOR.dom.element(e.data.$.relatedTarget||e.data.$.toElement);o&&o.$&&!o.equals(t)&&!o.is("body");)o=o.getParent();if(!o||o.equals(t))return}t.getAscendant("table",1).removeCustomData("_cke_table_pillars"),e.removeListener()}var i=CKEDITOR.tools.cssLength,r=CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks);CKEDITOR.plugins.add("tableresize",{requires:"tabletools",init:function(e){e.on("contentDom",(function(){var i,r=e.editable();r.attachListener(r.isInline()?r:e.document,"mousemove",(function(r){if((u=(r=r.data).getTarget()).type==CKEDITOR.NODE_ELEMENT){var l=r.getPageOffset().x,s=r.getPageOffset().y;if(i&&i.move(l,s))o(r);else if((u.is("table")||u.getAscendant({thead:1,tbody:1,tfoot:1},1))&&(r=u.getAscendant("table",1),e.editable().contains(r))){(u=r.getCustomData("_cke_table_pillars"))||(r.setCustomData("_cke_table_pillars",u=function(e){var o=[],n={},a="rtl"===e.getComputedStyle("direction"),i=CKEDITOR.tools.array.zip(new CKEDITOR.dom.nodeList(e.$.rows).toArray(),CKEDITOR.tools.buildTableMap(e));return CKEDITOR.tools.array.forEach(i,(function(i){var r=i[0].$;i=i[1];var l=-1,s=0,u=null;u=r?{height:(s=new CKEDITOR.dom.element(r)).$.offsetHeight,position:s.getDocumentPosition()}:void 0,r=CKEDITOR.env.ie&&!CKEDITOR.env.edge;for(var d="collapse"===e.getComputedStyle("border-collapse"),m=(s=u.height,u=u.position,0);m<i.length;m++){var h,f,c=new CKEDITOR.dom.element(i[m]),g=i[m+1]&&new CKEDITOR.dom.element(i[m+1]),p=c.getDocumentPosition().x;l+=c.$.colSpan||1,a?f=p+t(c,"left"):h=p+c.$.offsetWidth-t(c,"right"),g?(p=g.getDocumentPosition().x,a?h=p+g.$.offsetWidth-t(g,"right"):f=p+t(g,"left")):(p=e.getDocumentPosition().x,a?h=p:f=p+e.$.offsetWidth),c=Math.max(f-h,3),r&&d&&(h-=c,c=Math.max(f-h,3)),c={table:e,index:l,x:h,y:u.y,width:c,height:s,rtl:a},n[l]=n[l]||[],n[l].push(c),c.alignedPillars=n[l],o.push(c)}})),o}(r)),r.on("mouseout",a),r.on("mousedown",a));e:{r=u;for(var u=0,d=r.length;u<d;u++){var m=r[u];if(l>=m.x&&l<=m.x+m.width&&s>=m.y&&s<=m.y+m.height){l=m;break e}}l=null}l&&(!i&&(i=new n(e)),i.attachTo(l))}}}))}))}})}();